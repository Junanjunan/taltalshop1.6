{% extends 'base.html' %}
{% load humanize %}

{% block content %}

<div class="second-body mlmrauto">
    <div class="flex">
        <div>
            {% for i in item.photos.all %}
            <div>
                <img class="small-photo" src="{{i.photo.url}}" alt="{{i.name}}" width="50px" height="50px">
            </div>
            {% endfor %}
        </div>
        <div class="photo-box">
            
            <img class="detail-main" src="{{item.first_photo}}" alt="{{item.name}}">
        </div>
        <div class="cursor"></div> 
        <div>
            <div class="hover-main-image-div none">
                <img class="hover-main-image" src="{{item.first_photo}}" alt="{{item.name}}">
            </div>
            <div>
                <span class="item-name">{{item.name}}</span>
                <span id="fav"
                {% for i in request.user.favs.all %}
                {% if i.item.pk == item.pk %}
                    class="exist"
                {% endif %}
                {% endfor %}
                >
                </span>
                {% if item.user == request.user %}
                <span><a href="{% url 'items:item-updating' item.pk %}" class="modify-item">[수정하기]</a></span>
                {% endif %}
            </div>
            <div class="detail-rating">
                <span class="detail-rating-star">
                    {% if review_mean %}
                        {% if review_mean <= 1.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                            <i class="fas fa-star-half gold-star star-half-before"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 2.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 3.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                            <i class="fas fa-star-half gold-star star-half-before"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 4.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 5.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                            <i class="fas fa-star-half gold-star star-half-before"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 6.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 7.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                            <i class="fas fa-star-half gold-star star-half-before"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 8.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                        </span>
                        {% elif review_mean <= 9.5 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gray-star star-background"></i>
                            <i class="fas fa-star-half gold-star star-half-before"></i>
                        </span>
                        {% elif review_mean <= 10 %}
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        <span class="star-bind">
                            <i class="fas fa-star gold-star star-background"></i>
                        </span>
                        {% endif %}
                    {% else %}
                    {% endif %}
                </span>
                <span>
                    {{item.reviews.all|length}}개의 상품평
                </span>
            </div>
            <hr class="hr15">
            <div class="item-price">{{item.price|intcomma}}원</div>
            <hr class="hr15">
            <div>{% if item.deli_fee == 0 %}무료배송{% else %}배송비: {{item.deli_fee}}원{% endif %}</div>
            <hr class="hr15">
            <div class="relative flex">
                <form method="GET">
                    <input class="order-quan" type="number" name="item-count" min="1" value="1">
                    <button class="buy-btn" formaction="{% url 'payments:direct' new_id item.pk %}">바로 구매</button>
                </form>
                {% if request.user.pk is None %}
                <a href="{% url 'users:login' %}"><button class="bucket-btn target_bucket relative">장바구니 담기</button></a>
                {% else %}
                <span class="relative">
                    <span class="message-div"></span>
                    <button class="bucket-btn target_bucket">장바구니 담기</button>
                </span>
                {% endif %}
            </div>
            <ul class= "detail-small">
                <li>유통기한</li>
                <li>모발타입</li>
                <li>구성: 본품</li>
                <li>탈탈상품번호:~~</li>
            </ul>
        </div>
    </div>
    <div class="flex item-nav-set mlmrauto">
        <a href="#nav-detail"><div class="item-nav">상품상세</div></a>
        <a href="#nav-review"><div class="item-nav">상품평</div></a>
        <a href="#nav-inquiry"><div class="item-nav">상품문의</div></a>
        <a href="#nav-deli"><div class="item-nav">배송/교환/반품 안내</div></a>
    </div>
    <div>
        <div id="nav-detail">상품종류:{{item.get_item_category_display}}</div>
        <table>
            <colgroup>
            <col span="1" class="col-title">
                <col span="1" class="col-des">
                <col span="1" class="col-title">
                <col span="1" class="col-des">
            </colgroup>
            <tr>
                <td>용량(중량)</td>
                <td>{{item.volume}}</td>
                <td>제품 주요 사양</td>
                <td>{{item.specification}}</td>
            </tr>
            <tr>
                <td>사용기한 또는 개봉 후 사용기간</td>
                <td>{{item.use_period}}</td>
                <td>사용방법</td>
                <td>{{item.how_to_use}}</td>
            </tr>
            <tr>
                <td>화장품제조업자 및 화장품책임판매업자</td>
                <td>{{item.producer}}
                </td>
                <td>제조국</td>
                <td>{{item.coo}}({{item.get_coo_display}})</td>
            </tr>
            <tr>
                <td>화장품법에 따라 기재, 표시하여야 하는 모든 성분</td>
                <td>{{item.cosmetic_component}}</td>
                <td>식품의약품안전처 심사필 유무 (기능성 화장품)</td>
                <td>{{item.certification}}</td>
            </tr>
            <tr>
                <td>사용할 때 주의사항</td>
                <td>{{item.precaution}}</td>
                <td>품질보증기준</td>
                <td>{{item.quality_guarantee}}</td>
            </tr>
            <tr>
                <td>소비자상담관련 전화번호</td>
                <td>{{item.inquiry_number}}</td>
            </tr>
        </table>
    </div>
    <div class="photo-zone height2000">
        {% if item.detail_pages %}
        {% for i in item.detail_pages.all %}
            <div><img width="900px" src="{{i.photo.url}}" alt="photo"></div>
        {% endfor %}
        {% endif %}
        <div class="tshowing none">
            
        </div>
    </div>
    <div class="fold-btn-div flex-center"><button class="fold-btn" onclick=toggling>상품정보 더보기 <i class="fas fa-chevron-down"></i></button></div>
    <hr>

    <div>
        <div>
            <div  id="nav-review">
                <span class="detail-title">상품평</span>
                <a href="{% url 'reviews:waiting-list' %}">상품평 쓰기</a>
            </div>
        </div>
        <div>
            {% if review_list %}
            {% for review in review_list %}
            <div class="review-div">
                <div class="flex space-between">
                    <span>{{review.user|slugify|slice:"0:3"}}***</span>
                    {% if review.user.pk == request.user.pk %}
                    <a href="{% url 'reviews:updating-review' review.payment.merchant_uid %}" class="modify-review-btn">리뷰 수정하기</a>
                    {% endif %}
                </div>
                <div>
                    <span>
                        {% if review.rating == 2 %}
                        <i class="fas fa-star gold-star"></i><i class="fas fa-star gray-star"></i><i class="fas fa-star gray-star"></i><i class="fas fa-star gray-star"></i><i class="fas fa-star gray-star"></i>
                        {% elif review.rating == 4 %}
                        <i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gray-star"></i><i class="fas fa-star gray-star"></i><i class="fas fa-star gray-star"></i>
                        {% elif review.rating == 6 %}
                        <i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gray-star"></i><i class="fas fa-star gray-star"></i>
                        {% elif review.rating == 8 %}
                        <i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gray-star"></i>
                        {% elif review.rating == 10 %}
                        <i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i><i class="fas fa-star gold-star"></i>
                        {% endif %}
                    </span>
                    <span class="review-date">{{review.updated|date:"Y-m-d"}}</span>
                </div>
                <div class="review-item-name">{{review.item.name}}</div>
            </div>
            <div class="reviewPhotoDiv">
                {% for p in review.photos.all %}
                <img id="review_{{review.pk}}" class="reviewPhoto pointer" src="{{p.photo.url}}" alt="{{p.name}}" width="100px" height="100px">
                {% endfor %}
            </div>
            <div id="review_{{review.pk}}" class="reviewPopPhoto none2">
                <div class="modal-overlay2"></div>
                <div class="modal-in2">
                    <div class="exit2">X</div>
                    <div class="popPhotoDiv">
                    </div>
                    <div class="popSmallPhotoDiv">
                        {% for p in review.photos.all %}
                        <img class="popSmallPhoto" src="{{p.photo.url}}" alt="{{p.name}}" width="50px" height="50px">
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div>{{review.content}}</div>
            <hr>
            {% endfor %}
            {% else %}
            <div class="flex-center">등록된 상품평이 없습니다.</div>
            {% endif %}
        </div>
        <br>
        <hr>
        <div class="flex space-between" id="nav-inquiry">
            <div class="detail-title">상품문의</div>
            {% if user.is_authenticated %}
                <button class="modal-btn" onclick=modalling>문의하기</button>
            {% else %}
                <a href="{% url 'users:login' %}"><button class="modal-btn">문의하기</button></a>
            {% endif %}
        </div>
        <div>
            <ul>
                <li>구매한 상품의 취소/반품은 마이탈탈 구매내역에서 신청 가능합니다.</li>
                <li>상품문의 및 후기게시판을 통해 취소나 환불, 반품 등은 처리되지 않습니다.</li>
                <li>가격, 판매자, 교환/환불 및 배송 등 해당 상품 자체와 관련 없는 문의는 고객센터 내 1:1 문의하기를 이용해주세요.</li>
                <li>"해당 상품 자체"와 관계없는 글, 양도, 광고성, 욕설, 비방, 도배 등의 글은 예고 없이 이동, 노출제한, 삭제 등의 조치가 취해질 수 있습니다.</li>
                <li>공개 게시판이므로 전화번호, 메일 주소 등 고객님의 소중한 개인정보는 절대 남기지 말아주세요.</li>
            </ul>
        </div>
        <hr>
        <div>
            {% for i in inquiries %}
                {% if i.item.pk == item.pk %}
                <div>
                    <div class="flex space-between">
                        <div class="inquiry-div">
                            <span class="back-gray">질문</span>
                            <span>{{i.user|slugify|slice:"0:3"}}***</span>
                        </div>
                        <div>
                            {{i.created|date:"Y/m/d"}} {{i.created|time:"H:i:s"}}
                        </div>
                    </div>
                    <div class="inquiry-div">
                        <span class="inquiry-left"></span>
                        <span>{{i.inquiry}}</span>
                    </div>
                    {% if request.user == i.user %}
                    <span class="inquiry-left"></span><button><a href="{% url 'items:inquiry-delete' i.pk %}">삭제</a></button>
                    {% endif %}    
                    </div>
                    {% if i.comment %}
                    <div class="comment-div">
                        <i class="fas fa-long-arrow-alt-right"></i><span class="back-blue">답변</span><span>{{item.user}}</span>
                    </div>
                    <div>
                        <span class="inquiry-left"></span>
                        <span>{{i.comment}}</span>
                    </div>    
                    {% endif %}
                    {% if item.user.pk == request.user.pk %}
                    <form action="{% url 'items:inquiry-comment' i.pk %}" method="GET">
                        <input name="comment" type="text">
                        <button>답글달기 및 답글수정</button><a href="{% url 'items:inquiry-comment-delete' i.pk %}">답글 삭제</a>
                    </form>
                    {% endif %}
                <hr>
                {% endif %}
            {% endfor %}
        </div>
        <div class="modal-before none">
            <div class="modal-overlay" onclick=modalling></div>
            <div class="modal-in">
                <div class="flex space-between">
                    <div class="inquiry-title center">상품문의</div>
                    <button class="modal-close-btn" onclick=modalling>X</button>
                </div>
                <form method='post' class="center">
                    {% csrf_token %}
                    <table class="inquiry-box">
                        <tr>
                            <td>상품</td><td>{{item}}</td>
                        </tr>
                        <tr>
                            <td>판매자</td><td>{{item.user.first_name}}</td>
                        </tr>
                        <tr>
                            <td>문의내용</td><td>{{form.inquiry}}</td>
                        </tr>
                    </table>
                    <div class="center"><button class="white-btn">확인</button></div>
                </form>
            </div>
        </div>
        
    </div>
</div>

<script>
    const form = document.querySelector("form")
    const fold_btn = document.querySelector(".fold-btn");
    const order_quan = document.querySelector(".order-quan");
    const modal_btn = document.querySelector(".modal-btn");
    const modal_close_btn = document.querySelector(".modal-close-btn");
    const modal_before = document.querySelector(".modal-before");
    const modal_in = document.querySelector(".modal-in");
    const modal_overlay = document.querySelector(".modal-overlay");
    const fav = document.querySelector("#fav");

    if(fav.classList.contains("exist")){
        fav.innerHTML = "<i class='fas fa-heart heart-color'></i>"
    } else{
        fav.innerHTML = "<i class='far fa-heart'></i>"
    }

    fav.addEventListener("click", function(){
        $.ajax({
            method: "GET",
            url: "{% url 'items:push-fav' item.pk %}"
        }).done(function(){
            if(fav.classList.contains("exist")){
                fav.classList.remove("exist")
                fav.innerHTML = "<i class='far fa-heart'></i>"
            } else{
                fav.classList.add("exist")
                fav.innerHTML = "<i class='fas fa-heart heart-color'></i>"
            }
        })
    })


    function onlyInput(e){
        if(e.keyCode===190 || e.keyCode===110){
            e.preventDefault();
        }
    };

    function toggling(){
        const tshowing = document.querySelector(".tshowing");
        if(tshowing.classList.contains("none")){
            tshowing.classList.remove("none");
            fold_btn.innerHTML="상품정보 접기 <i class='fas fa-chevron-up'></i>";
        } else{
            tshowing.classList.add("none");
            fold_btn.innerHTML="상품정보 더보기 <i class='fas fa-chevron-down'></i>";
        }

        const photoZone = document.querySelector(".photo-zone");
        if(photoZone.classList.contains("height2000")){
            photoZone.classList.remove("height2000");
            fold_btn.innerHTML="상품정보 접기 <i class='fas fa-chevron-up'></i>";
        } else{
            photoZone.classList.add("height2000");
            fold_btn.innerHTML="상품정보 더보기 <i class='fas fa-chevron-down'></i>";
        }
    };

    function modalling(){
        if(modal_before.classList.contains("modal-after")){
            modal_before.classList.remove("modal-after");
            modal_before.classList.add("none");
        } else{
            modal_before.classList.add("modal-after");
            modal_before.classList.remove("none");
        }
    }

    order_quan.addEventListener("keydown", onlyInput);
    fold_btn.addEventListener("click", toggling);
    modal_btn.addEventListener("click", modalling);
    modal_close_btn.addEventListener("click", modalling);
    modal_overlay.addEventListener("click", modalling);

    if(JSON.parse(localStorage.getItem("item"))){
        var arr = JSON.parse(localStorage.getItem("item"));
    } else{
        var arr = [];
    }
    var newItem = ["{{item.name}}", "{{item.first_photo}}", "{{item.pk}}", "{{item.price|intcomma}}원"]
    for(let i=0; i < arr.length; i++){
        if(arr[i][2] === newItem[2]){
            arr.splice(i,1);
            i--;            
        }
    }
    arr.unshift(newItem)
    localStorage.setItem("item", JSON.stringify(arr))

    const target_bucket = document.querySelector(".target_bucket");
    const message_div = document.querySelector(".message-div");
    const bucketCount = document.querySelector(".bucket-count");

    target_bucket.addEventListener("click", function(){
        const item_count = order_quan.value;
        const userId = "{{request.user.pk}}"
        
        $.ajax({
            method: "GET",
            url: `/items/{{item.pk}}/pushbucket/`,
            data: {
                "item-count": item_count
            }
            }).done(function(){
                message_div.innerHTML = `
                    <div class="message-box flex-column-center fav-message">
                        <div>상품이 장바구니에 담겼습니다.</div>
                        <div class="go-bucket-btn"><a href="/users/customer-bucket/${userId}/">장바구니 바로가기</a></div>
                    </div>`;
                bucketCount.innerHTML = "{{request.user.totalbuckets.count|add:1}}";
                setTimeout(function(){message_div.innerHTML = ""}, 2000);
            })
        })

    const small_photo = document.querySelectorAll(".small-photo");
    const photo_box = document.querySelector(".photo-box");
    const cursor = document.querySelector(".cursor");

    const detailMain = document.querySelector(".detail-main");
    const hoverMainImage = document.querySelector(".hover-main-image");
    const hoverMainImageDiv = document.querySelector(".hover-main-image-div");
    
    detailMain.addEventListener("mousemove", function(e){
        let width = detailMain.offsetWidth;
        let height = detailMain.offsetHeight;
        let bigWidth = hoverMainImage.offsetWidth;
        let bigHeight = hoverMainImage.offsetHeight;
        let divWidth = hoverMainImageDiv.offsetWidth;
        let divHeight = hoverMainImageDiv.offsetHeight;
        let mouseX = e.offsetX;
        let mouseY = e.offsetY;
        let ratio = detailMain.offsetWidth/hoverMainImage.offsetWidth;

        hoverMainImageDiv.classList.remove("none");
        hoverMainImage.src = detailMain.src;

        hoverMainImage.style.left = -(bigWidth-divWidth)/width*mouseX + "px";
        hoverMainImage.style.top = -(bigHeight-divHeight)/height*mouseY + "px";
        cursor.classList.remove("none");
        cursor.style.top = e.pageY+"px";
        cursor.style.left = e.pageX+"px";
        cursor.style.width = width*ratio+"px";
        cursor.style.height = width*ratio+"px";
        detailMain.style.zIndex = 0;
        cursor.style.zIndex = 1;
    })
    
    detailMain.addEventListener("mouseleave", function(){
        hoverMainImageDiv.classList.add("none");
        cursor.classList.add("none");
    })

    for(let i=0; i < small_photo.length; i++){
        small_photo[i].addEventListener("mouseover", function(){
            photo_box.innerHTML = `<img class="detail-main" src=${small_photo[i].src} alt="photo-box">`;
            const detailMain = document.querySelector(".detail-main");
            const hoverMainImage = document.querySelector(".hover-main-image");
            const hoverMainImageDiv = document.querySelector(".hover-main-image-div");
            
            detailMain.style.maxWidth = "450px";
            detailMain.style.maxHeight = "450px";
            detailMain.addEventListener("mousemove", function(e){
                
                let width = detailMain.offsetWidth;
                let height = detailMain.offsetHeight;
                let bigWidth = hoverMainImage.offsetWidth;
                let bigHeight = hoverMainImage.offsetHeight;
                let divWidth = hoverMainImageDiv.offsetWidth;
                let divHeight = hoverMainImageDiv.offsetHeight;
                let mouseX = e.offsetX;
                let mouseY = e.offsetY;
                let ratio = width/bigWidth;

                hoverMainImageDiv.classList.remove("none");
                hoverMainImage.src = detailMain.src;

                hoverMainImage.style.left = -(bigWidth-divWidth)/width*mouseX + "px";
                hoverMainImage.style.top = -(bigHeight-divHeight)/height*mouseY + "px";
                
                cursor.classList.remove("none");
                cursor.style.top = e.pageY+"px";
                cursor.style.left = e.pageX+"px";
                cursor.style.width = width*ratio+"px";
                cursor.style.height = width*ratio+"px";
                detailMain.style.zIndex = 0;
                cursor.style.zIndex = 1;
            });
            
            detailMain.addEventListener("mouseleave", function(){
                hoverMainImageDiv.classList.add("none");
                cursor.classList.add("none");
            })
        });
    }

    const reviewPhoto = document.querySelectorAll(".reviewPhoto");
    const reviewPopPhoto = document.querySelectorAll(".reviewPopPhoto");
    const popPhotoDiv = document.querySelectorAll(".popPhotoDiv");
    const popSmallPhotoDiv = document.querySelectorAll(".popSmallPhotoDiv");
    for(let i=0; i<reviewPhoto.length; i++){
        reviewPhoto[i].addEventListener("click", function(){
            for(let j=0; j<reviewPopPhoto.length; j++){
                if(reviewPhoto[i].id === reviewPopPhoto[j].id){
                    reviewPopPhoto[j].classList.remove("none2");
                    reviewPopPhoto[j].classList.add("modal-after2");
                    popPhotoDiv[j].innerHTML = `<img src=${reviewPhoto[i].src} alt="small" width="900px" height="700px">`;
                }
            };
        })
    }

    const popSmallPhoto = document.querySelectorAll(".popSmallPhoto");
    for(let i=0; i<popSmallPhoto.length; i++){       
        popSmallPhoto[i].addEventListener("mouseover", function(){
                for(let j=0; j<popPhotoDiv.length; j++){
                    popPhotoDiv[j].innerHTML = `<img src=${popSmallPhoto[i].src} alt="small" width="900px" height="700px">`;
                }
            })
    }
    
    const modal_overlay2 = document.querySelectorAll(".modal-overlay2");
    for(let j=0; j<modal_overlay2.length; j++){
        modal_overlay2[j].addEventListener("click", function(){
            for(let i=0; i<reviewPopPhoto.length; i++){
                reviewPopPhoto[i].classList.remove("modal-after2");
                reviewPopPhoto[i].classList.add("none2");
            }
        })
    }

    const exit2 = document.querySelectorAll(".exit2");
    for(let j=0; j<exit2.length; j++){
        exit2[j].addEventListener("click", function(){
            for(let i=0; i<reviewPopPhoto.length; i++){
                reviewPopPhoto[i].classList.remove("modal-after2");
                reviewPopPhoto[i].classList.add("none2");
            }
        })
    }

</script>
{% endblock content %}